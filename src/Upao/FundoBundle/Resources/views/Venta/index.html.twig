{% extends '::base.html.twig' %}

{% block body -%}

    <h3>Ventas <a class="btn btn-primary btn-modal" href="{{ path('venta_new') }}">Nueva</a></h3>

    <div class="tab-pane" id="datatable">
        <section class="panel">
            <div class="table-responsive">
                <table class="table table-striped m-b-none" data-href="{{ path('venta') }}" data-ride="datatables">
                    <thead>
                    <tr>
                        <th data-property="cosecha" width="10%">Cosecha</th>
                        <th data-property="cliente" width="15%">Cliente</th>
                        <th data-property="tipo" width="5%">Tipo</th>
                        <th data-property="kilos_vendidos" width="10%">Kg. Vendidos</th>
                        <th data-property="costo" width="10%">Costo</th>
                        <th data-property="observaciones" width="30%">Observaciones</th>
                        <th data-property="id" width="10%">Detalle</th>

                    </tr>
                    </thead>
                    <tbody>

                    </tbody>
                </table>
            </div>
        </section>
    </div>


{% endblock %}
{% block javascript %}
    <script>
        $(document).ready(function () {

            $('[data-ride="datatables"]').each(function () {
                var $element = $(this);
                var oTable = $(this).dataTable({
                    "bProcessing": true,
                    "sAjaxDataProp": "results",
                    "sAjaxSource": $element.data('href'),
                    "sDom": "<'row'<'col-sm-6'l><'col-sm-6'f>r>t<'row'<'col-sm-6'i><'col-sm-6'p>>",
                    "sPaginationType": "full_numbers",
                    "aoColumns": [
                        {"mData": "cosecha"},
                        {"mData": "cliente"},
                        {"mData": "tipo"},
                        {"mData": "kilos_vendidos"},
                        {"mData": "costo"},
                        {"mData": "observaciones"},
                        {"mData": "id"}
                    ],
                    fnStateLoad: function () {
                        console.log('cargo');
                    }
                });
            });
        })
    </script>

{% endblock %}
